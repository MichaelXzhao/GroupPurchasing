import{_ as q,r as d,a as x,f as w,o as h,c as p,b as t,t as n,w as y,v as k,F as m,g as C,h as I,i as S,d as T,p as L,e as O}from"./index-7654b0de.js";import{L as N,_ as P,a as U}from"./Group2-987bdde3.js";import{a as _,c as G,s as j}from"./shareURL-14ab96ed.js";const E={setup(){let e=d({}),l=d(),i=d(0),o=d(0),g=d(""),r=d(!1),u=d({}),a=s=>{o.value=G.addqty(s)},b=s=>{o.value=G.reduceqty(s)},B=async()=>{console.log(o.value),console.log("http://localhost:9191/"),await _.post("http://localhost:9191/api/Order/add",{user_name:localStorage.getItem("username"),product_qty:o.value,price:e.value.price,product:e.value.product,picture:e.value.picture,salepageid:e.value.salepageid,shopid:e.value.shopid,skuid:e.value.skuid}).then(s=>{console.log(s)}).catch(s=>{console.log(s)}),_.get("http://localhost:9191/api/Order/Detail?salepageid="+localStorage.getItem("salepageid")).then(s=>{console.log(s),e.value=s.data,l.value=s.data.memberData,i.value=0,l.value.forEach(v=>{i.value=i.value+v.qty}),console.log(typeof s.data.skuid),console.log(l.value),g.value="https:"+s.data.picture,u.value=s.data.discountData}).catch(s=>{console.log(s)}).finally(()=>{window.scrollTo(0,document.body.scrollHeight)})},f=()=>{j.shareURL(localStorage.getItem("username"))},D=()=>{window.scrollTo(0,0),r.value=!0,_.post("http://localhost:9191/Carts/Insert",{shopId:e.value.shopid,salePageId:e.value.salepageid,saleProductSKUid:e.value.skuid,qty:i.value}).then(s=>{console.log(s),localStorage.setItem("orderNumber",s.data.orderNumber)}).catch(s=>{console.log(s)}).finally(()=>{r.value=!1,T.push({path:"/result"})})};return x(()=>{r.value=!0,console.log("http://localhost:9191/"),_.get("http://localhost:9191/api/Order/Detail?salepageid="+localStorage.getItem("salepageid")).then(s=>{console.log(s),e.value=s.data,l.value=s.data.memberData,i.value=0,l.value.forEach(v=>{i.value=i.value+v.qty}),console.log(typeof s.data.skuid),console.log(l.value),g.value="https:"+s.data.picture,u.value=s.data.discountData}).catch(s=>{console.log(s)}).finally(()=>{r.value=!1})}),{data:e,memberData:l,totalqty:i,inputqty:o,imgurl:g,loadingDisplay:r,discountData:u,addqty:a,reduceqty:b,joinGroupBuy:B,shareWeb:f,insertCart:D}},components:{Loading:N}},c=e=>(L("data-v-cc134486"),e=e(),O(),e),V=c(()=>t("div",{class:"layout-header-fix"},[t("div",{class:"layout-header-fix-logo"},[t("img",{style:{height:"100px"},src:P,alt:""}),t("img",{class:"header-logo",src:U,alt:""})])],-1)),W={class:"hostGroupBuy-content"},F={class:"hostGroupBuy-content-content"},M={class:"hostGroupBuy-content-left"},R={class:"hostGroupBuy-content-left-img"},z={class:"hostGroupBuy-content-left-img-div"},H=["src"],K=c(()=>t("div",{class:"hostGroupBuy-content-left-img-small"},null,-1)),A={class:"hostGroupBuy-content-right"},J={class:"hostGroupBuy-content-right-title"},Q={class:"hostGroupBuy-content-right-price"},X=c(()=>t("div",{class:"hostGroupBuy-content-right-color"},[t("div",{class:"hostGroupBuy-content-right-color-content"})],-1)),Y=c(()=>t("div",{class:"hostGroupBuy-content-right-size"},[t("div",{class:"hostGroupBuy-content-right-color-content"})],-1)),Z={class:"hostGroupBuy-content-right-qty"},$=c(()=>t("div",{class:"hostGroupBuy-content-right-color-title"},"數量",-1)),tt={class:"hostGroupBuy-content-right-qty-content"},ot={style:{width:"10px"},"enable-background":"new 0 0 10 10",viewBox:"0 0 10 10",x:"0",y:"0",class:"shopee-svg-icon"},st=c(()=>t("polygon",{points:"4.5 4.5 3.5 4.5 0 4.5 0 5.5 3.5 5.5 4.5 5.5 10 5.5 10 4.5"},null,-1)),lt=[st],et={style:{width:"10px"},"enable-background":"new 0 0 10 10",viewBox:"0 0 10 10",x:"0",y:"0",class:"shopee-svg-icon icon-plus-sign"},at=c(()=>t("polygon",{points:"10 4.5 5.5 4.5 5.5 0 4.5 0 4.5 4.5 0 4.5 0 5.5 4.5 5.5 4.5 10 5.5 10 5.5 5.5 10 5.5"},null,-1)),nt=[at],it={class:"hostGroupBuy-content-right-color-content-groupbuy"},ct={class:"hostGroup-list"},dt={class:"hostGroup-list-table"},rt={class:"hostGroup-list-table-table"},ut=c(()=>t("thead",{class:"hostGroup-list-table-table-thead"},[t("tr",null,[t("th",null,"名稱"),t("th",null,"數量"),t("th",null,"金額")])],-1)),ht={class:"hostGroup-list-table-table-tbody"},pt={class:"hostGroup-list-total"},gt={class:"hostGroup-list-total-total"},_t={class:"hostGroup-list-total-content"},vt={style:{"margin-right":"10px"}},yt={style:{"margin-right":"10px"}},mt={style:{"margin-right":"10px"}},Gt={style:{"margin-right":"10px"}},bt={class:"hostGroup-list-total-button"},Bt={class:"loading"};function ft(e,l,i,o,g,r){const u=w("Loading");return h(),p(m,null,[V,t("div",W,[t("div",F,[t("div",M,[t("div",R,[t("div",z,[t("img",{class:"hostGroupBuy-content-left-img-img",src:o.imgurl,alt:""},null,8,H)]),K])]),t("div",A,[t("div",J,n(o.data.product),1),t("div",Q,"$"+n(o.data.price),1),X,Y,t("div",Z,[$,t("div",tt,[t("button",{class:"hostGroupBuy-content-right-color-content-minus",onClick:l[0]||(l[0]=a=>o.reduceqty(o.inputqty))},[(h(),p("svg",ot,lt))]),y(t("input",{class:"hostGroupBuy-content-right-color-content-input",type:"number","onUpdate:modelValue":l[1]||(l[1]=a=>o.inputqty=a)},null,512),[[k,o.inputqty]]),t("button",{class:"hostGroupBuy-content-right-color-content-plus",onClick:l[2]||(l[2]=a=>o.addqty(o.inputqty))},[(h(),p("svg",et,nt))])])]),t("div",it,[t("button",{class:"hostGroupBuy-content-right-color-content-groupbuy-button",onClick:l[3]||(l[3]=(...a)=>o.joinGroupBuy&&o.joinGroupBuy(...a))}," 加入團購 "),t("button",{class:"hostGroupBuy-content-right-color-content-share-button",onClick:l[4]||(l[4]=(...a)=>o.shareWeb&&o.shareWeb(...a))}," 分享連結 ")]),t("div",null,"已選購$"+n(o.discountData.totalOriginalPrice),1),t("div",null,"目前折扣"+n(o.discountData.promotionDiscount),1),t("div",null,n(o.discountData.promotionDiscountTitle),1),t("div",null,n(o.discountData.recommendConditionTitle),1)])])]),t("div",ct,[t("div",dt,[t("table",rt,[ut,t("tbody",ht,[(h(!0),p(m,null,C(o.memberData,a=>(h(),p("tr",null,[t("td",null,n(a.member),1),t("td",null,n(a.qty),1),t("td",null,n(a.qty*o.data.price),1)]))),256))])]),t("div",pt,[t("div",gt,[t("div",_t,[t("div",vt,"已選購$"+n(o.discountData.totalOriginalPrice),1),t("div",yt,"目前折扣"+n(o.discountData.promotionDiscount),1),t("div",mt,n(o.discountData.promotionDiscountTitle),1),t("div",Gt,n(o.discountData.recommendConditionTitle),1)]),t("div",bt,[t("button",{class:"hostGroup-list-total-button-button",onClick:l[5]||(l[5]=(...a)=>o.insertCart&&o.insertCart(...a))},"提交購物車")])])])])]),y(t("div",Bt,[S(u)],512),[[I,o.loadingDisplay]])],64)}const wt=q(E,[["render",ft],["__scopeId","data-v-cc134486"]]);export{wt as default};
